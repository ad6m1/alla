<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AI Creator Console</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#020617;
      --accent:#22c55e;
      --accent2:#38bdf8;
      --danger:#ef4444;
      --text:#e5e7eb;
      --muted:#94a3b8;
    }

    *{box-sizing:border-box}

    body{
      margin:0;
      min-height:100vh;
      font-family:"Tajawal",system-ui;
      color:var(--text);
      background:
        radial-gradient(600px 300px at 10% 10%,rgba(56,189,248,.15),transparent),
        radial-gradient(500px 300px at 90% 20%,rgba(34,197,94,.12),transparent),
        linear-gradient(180deg,#020617,#020617);
    }

    .app{
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:40px 20px;
    }

    .layout{
      width:100%;
      max-width:1100px;
      display:grid;
      grid-template-columns:1fr;
      gap:40px;
    }

    @media(min-width:900px){
      .layout{
        grid-template-columns:1fr 1fr;
        align-items:center;
      }
    }

    .brand h1{
      font-size:38px;
      margin:0 0 12px;
      background:linear-gradient(135deg,#22c55e,#38bdf8);
      -webkit-background-clip:text;
      color:transparent;
    }

    .brand p{
      color:var(--muted);
      max-width:420px;
      line-height:1.7;
    }

    .brand a{
      color:var(--accent2);
      text-decoration:none;
      cursor:pointer;
    }

    .panel{width:100%}

    input,select,textarea{
      width:100%;
      padding:14px;
      border-radius:14px;
      border:1px solid rgba(148,163,184,.2);
      background:#020617;
      color:#fff;
      font-family:inherit;
      margin-bottom:14px;
    }

    textarea{min-height:90px}

    button{
      width:100%;
      padding:14px;
      border:none;
      border-radius:16px;
      font-weight:700;
      cursor:pointer;
      transition:.2s;
    }

    button:active{transform:scale(.96)}

    .btn-main{
      background:linear-gradient(135deg,#22c55e,#4ade80);
      color:#052e16;
    }

    .btn-instagram{
      background:linear-gradient(135deg,#833ab4,#fd1d1d,#fcb045);
      color:#fff;
      margin-top:10px;
    }

    /* ===== ØªØµØ­ÙŠØ­ Ø²Ø± Ø°ÙƒØ±Ù†ÙŠ ===== */
    .btn-connect{
      background:linear-gradient(135deg,#38bdf8,#22c55e);
      color:#022c22;
      margin-bottom:16px;
      font-weight:800;
    }

    .remember{
      display:flex;
      align-items:center;
      gap:8px;
      margin-bottom:14px;
      font-size:14px;
      color:var(--muted);
      cursor:pointer;
      user-select:none;
    }

    .remember input{
      accent-color:#22c55e;
      width:16px;
      height:16px;
      margin:0;
    }
    /* ======================== */

    .nav{
      display:flex;
      gap:10px;
      margin-bottom:18px;
    }

    .nav button{
      background:#020617;
      color:#cbd5f5;
    }

    .dots span{
      animation:blink 1.4s infinite both;
    }

    .dots span:nth-child(2){animation-delay:.2s}
    .dots span:nth-child(3){animation-delay:.4s}

    @keyframes blink{
      0%{opacity:.2}
      20%{opacity:1}
      100%{opacity:.2}
    }

    .modal{
      position:fixed;
      inset:0;
      background:rgba(2,6,23,.8);
      display:none;
      align-items:center;
      justify-content:center;
      padding:20px;
    }

    .modal-content{
      background:#020617;
      border:1px solid rgba(148,163,184,.2);
      border-radius:18px;
      max-width:700px;
      padding:24px;
      max-height:80vh;
      overflow:auto;
    }

    .hidden{display:none}
  </style>
</head>
<body>
  <div class="app">
    <!-- LOGIN -->
    <div class="layout" id="loginPage">
      <div class="brand">
        <h1>AI Creator Console</h1>
        <p>
          Ù†Ø¸Ø§Ù… Ù†Ø´Ø± Ø£Ø®Ø·Ø¨ÙˆØ·ÙŠ Ø°ÙƒÙŠ ÙŠØ¹ØªÙ…Ø¯ Ø§Ù„Ø£ØªÙ…ØªØ© ÙˆØ§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ø¥Ø¯Ø§Ø±Ø© ÙˆÙ†Ø´Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¹Ø¨Ø± Ù…Ù†ØµØ§Øª Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ.
        </p>
        <a onclick="openDisclaimer()">Ø¥Ø®Ù„Ø§Ø¡ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©</a>
      </div>
      <div class="panel">
        <p>ÙŠØ³Ù…Ø­ ÙÙ‚Ø· Ø¨Ø¥ÙŠÙ…ÙŠÙ„Ø§Øª ahmedmarketing.cloud</p>
        <input id="emailInput" placeholder="name@ahmedmarketing.cloud">
        <input id="codeInput" type="password" placeholder="Ø§Ù„Ø±Ù…Ø²">
        <!-- ===== ØªØµØ­ÙŠØ­ Ø²Ø± Ø°ÙƒØ±Ù†ÙŠ ===== -->
        <label class="remember">
          <input type="checkbox" id="rememberMe">
          <span>ØªØ°ÙƒØ±Ù†ÙŠ Ù„Ù…Ø¯Ø© 30 ÙŠÙˆÙ…</span>
        </label>
        <!-- ======================== -->
        <button class="btn-main" onclick="login()">Ø¯Ø®ÙˆÙ„</button>
      </div>
    </div>

    <!-- APP -->
    <div class="layout hidden" id="appPage">
      <div class="brand">
        <h1>Smart Publishing</h1>
        <p>ØªØ­ÙƒÙ… ÙƒØ§Ù…Ù„ Ø¨Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù†Ø´Ø±ØŒ ØªØªØ¨Ø¹ØŒ ÙˆØ£ØªÙ…ØªØ© Ø¨Ø¯ÙˆÙ† ØªØ¯Ø®Ù„ Ø¨Ø´Ø±ÙŠ.</p>
      </div>
      <div class="panel">
        <!-- ===== Ø§Ù„Ø¥Ø¶Ø§ÙØ© ÙÙ‚Ø· ===== -->
        <a href="https://app.upload-post.com/connect?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImJyaG0ud29yazFAZ21haWwuY29tIiwicHJvZmlsZV91c2VybmFtZSI6ImFsbGFmaXRuaXMiLCJleHAiOjE3NzA1OTk3MjgsImlhdCI6MTc3MDQyNjkyOH0.Z_KiS7KrLX4p_yAXgPFh-0O76fTRzbpAl8MILrOhbNc" target="_blank" >
          <button class="btn-connect">
            ğŸ”— Ø±Ø¨Ø· Ø­Ø³Ø§Ø¨Ø§Øª Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ
          </button>
        </a>
        <!-- ====================== -->
        <div class="nav">
          <button onclick="go('publish')">Ø§Ù„Ù†Ø´Ø±</button>
          <button onclick="go('history')">Ø§Ù„Ø³Ø¬Ù„</button>
          <button onclick="logout()" style="background:#ef4444;color:#fff">Ø®Ø±ÙˆØ¬</button>
        </div>

        <!-- PUBLISH -->
        <div id="publishPage">
          <input type="file" id="mediaInput">
          <select id="postType" onchange="toggleCaption()">
            <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ù†Ø´Ø±</option>
            <option value="reels">Ø±ÙŠÙ„Ø²</option>
            <option value="story">Ø³ØªÙˆØ±ÙŠ</option>
            <option value="both">Ø±ÙŠÙ„Ø² + Ø³ØªÙˆØ±ÙŠ</option>
          </select>
          <textarea id="captionInput" class="hidden" placeholder="Ø§Ù„ÙˆØµÙ (Ù„Ù„Ø±ÙŠÙ„Ø² ÙÙ‚Ø·)"></textarea>
          <button class="btn-main" onclick="publish()">Ø±ÙØ¹ ÙˆÙ†Ø´Ø±</button>
          <div id="statusText"></div>
          <a href="https://www.instagram.com/8jy8/" target="_blank">
            <button class="btn-instagram">Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ø¥Ù†Ø³ØªØºØ±Ø§Ù…</button>
          </a>
        </div>

        <div id="historyPage" class="hidden"></div>
      </div>
    </div>
  </div>

  <!-- DISCLAIMER -->
  <div class="modal" id="disclaimer">
    <div class="modal-content">
      <h2>Ø¥Ø®Ù„Ø§Ø¡ Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©</h2>
      <p>Ù‡Ø°Ø§ Ø§Ù„Ù†Ø¸Ø§Ù… Ù‡Ùˆ Ø£Ø¯Ø§Ø© Ø£ØªÙ…ØªØ© Ø°ÙƒÙŠØ© ØªÙ‡Ø¯Ù Ø¥Ù„Ù‰ ØªØ³Ù‡ÙŠÙ„ ÙˆØªØ³Ø±ÙŠØ¹ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù†Ø´Ø± Ø¹Ø¨Ø± Ù…Ù†ØµØ§Øª Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ.</p>
      <p>Ù„Ø§ ÙŠØªØ­Ù…Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø£Ùˆ Ù…Ø·ÙˆÙ‘Ø±ÙˆÙ‡ Ø£ÙŠ Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ø£Ùˆ ØªÙ‚Ù†ÙŠØ© Ù†Ø§ØªØ¬Ø© Ø¹Ù†:</p>
      <ul>
        <li>Ù…Ø®Ø§Ù„ÙØ© Ø³ÙŠØ§Ø³Ø§Øª Ø£ÙŠ Ù…Ù†ØµØ© ØªÙˆØ§ØµÙ„ Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ</li>
        <li>Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø­ØªÙˆÙ‰ ØºÙŠØ± Ù…Ø±Ø®Ù‘Øµ Ø£Ùˆ Ù…Ø®Ø§Ù„Ù</li>
        <li>Ø­Ø¸Ø± Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø£Ùˆ ØªÙ‚ÙŠÙŠØ¯Ù‡Ø§</li>
      </ul>
      <p>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù‡Ùˆ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„ÙˆØ­ÙŠØ¯ Ø¹Ù† Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ÙˆØ§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªÙˆØ§ÙÙ‚Ù‡ Ù…Ø¹ Ø³ÙŠØ§Ø³Ø§Øª Ø§Ù„Ù…Ù†ØµØ§Øª.</p>
      <button class="btn-main" onclick="closeDisclaimer()">ÙÙ‡Ù…Øª</button>
    </div>
  </div>

  <script>
    const USERS = {
      "admin@ahmedmarketing.cloud": {code: "AM-ADMIN-9007"},
      "ali@ahmedmarketing.cloud": {code: "AM-ALI-7391"},
      "sara@ahmedmarketing.cloud": {code: "AM-SARA-4826"}
    };

    let currentUserEmail = "";

    // ===== ØªØµØ­ÙŠØ­: ÙˆØ¸Ø§Ø¦Ù ØªØ°ÙƒØ±Ù†ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© =====
    function saveLoginData(email, code) {
      const expiryDate = new Date();
      expiryDate.setDate(expiryDate.getDate() + 30);
      
      localStorage.setItem("savedEmail", email);
      localStorage.setItem("savedCode", code);
      localStorage.setItem("saveExpiry", expiryDate.getTime());
    }

    function clearLoginData() {
      localStorage.removeItem("savedEmail");
      localStorage.removeItem("savedCode");
      localStorage.removeItem("saveExpiry");
    }

    function loadSavedLogin() {
      const savedEmail = localStorage.getItem("savedEmail");
      const savedCode = localStorage.getItem("savedCode");
      const saveExpiry = localStorage.getItem("saveExpiry");

      if (!savedEmail || !savedCode || !saveExpiry) return;

      // ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©
      if (new Date().getTime() > parseInt(saveExpiry)) {
        clearLoginData();
        return;
      }

      // Ù…Ù„Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„
      emailInput.value = savedEmail;
      codeInput.value = savedCode;
      rememberMe.checked = true;
    }
    // ==========================================

    function login() {
      const email = emailInput.value.trim().toLowerCase();
      const code = codeInput.value.trim();

      if (!USERS[email] || USERS[email].code !== code) {
        alert("Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
        return;
      }

      // ===== ØªØµØ­ÙŠØ­: Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ø°Ø§ ØªÙ… ØªÙØ¹ÙŠÙ„ ØªØ°ÙƒØ±Ù†ÙŠ =====
      if (rememberMe.checked) {
        saveLoginData(email, code);
      } else {
        clearLoginData();
      }
      // ================================================

      currentUserEmail = email;
      loginPage.classList.add("hidden");
      appPage.classList.remove("hidden");
      go("publish");
    }

    function logout() {
      clearLoginData();
      location.reload();
    }

    function go(page) {
      publishPage.classList.add("hidden");
      historyPage.classList.add("hidden");
      if (page === "publish") publishPage.classList.remove("hidden");
      else historyPage.classList.remove("hidden");
    }

    function toggleCaption() {
      captionInput.classList.toggle(
        "hidden",
        postType.value === "story" || !postType.value
      );
    }

    async function publish() {
      if (!mediaInput.files.length || !postType.value) {
        alert("Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
        return;
      }

      statusText.innerHTML = 'Ù‚ÙŠØ¯ Ø§Ù„Ù†Ø´Ø± <span class="dots"><span>.</span><span>.</span><span>.</span></span>';
      const formData = new FormData();
      formData.append("file", mediaInput.files[0]);
      formData.append("postType", postType.value);
      formData.append("caption", captionInput.value || "");
      formData.append("userEmail", currentUserEmail);

      try {
        const res = await fetch(
          "https://n8n.srv1099752.hstgr.cloud/webhook-test/upload-video12",
          {
            method: "POST",
            body: formData
          }
        );
        if (!res.ok) throw new Error("Webhook failed");
        statusText.innerHTML = "âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¥Ù„Ù‰ Ø§Ù„Ù†Ø¸Ø§Ù…";
      } catch (err) {
        statusText.innerHTML = "âŒ ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ù†Ø¸Ø§Ù…";
      }
    }

    function openDisclaimer() {
      disclaimer.style.display = "flex";
    }

    function closeDisclaimer() {
      disclaimer.style.display = "none";
    }

    // ===== ØªØµØ­ÙŠØ­: ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø© =====
    window.addEventListener("DOMContentLoaded", loadSavedLogin);
    // ===================================================
  </script>
</body>
</html>
